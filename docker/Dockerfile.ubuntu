FROM ubuntu:22.04

COPY . /opt/hello.src

ARG NUM_PROCS=1

RUN echo "found $NUM_PROCS processors for build job" \
  && apt-get update && env DEBIAN_FRONTEND=noninteractive TZ=Europe/Zurich apt-get -yqq install --no-install-recommends build-essential cmake \
  && mkdir /tmp/build && cd /tmp/build \
  && cmake -DCMAKE_INSTALL_PREFIX=/opt/hello /opt/hello.src \
  && make -j$NUM_PROCS \
  && make install
